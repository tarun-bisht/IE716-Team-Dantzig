# Travelling Salesman Problem using Integer Programming

This repository contains code to find solution of Single Vehicle Pickup and Delivery travelling salesman problem (1-PDTSP) using integer programming for any list of cities. 1-PDTSP problem is, given a list of cities and the distances between each pair of cities, what is the shortest possible route that visits each city exactly once and returns to the origin city also fulfilling demands of each node.?

## Features

- Provide method to get city details, latitude and longitude information from [openstreetmap API](https://nominatim.openstreetmap.org) using which distance between these cities is calculated using [Haversine formula](https://www.geeksforgeeks.org/haversine-formula-to-find-distance-between-two-points-on-a-sphere/).
- Provide a formulation of TSP using [pyomo](http://www.pyomo.org/) that can be solved by any MILP solver supported by pyomo.

## Installing dependencies

The command below will install all the required dependencies python from `requirements.txt` file.

```bash
pip install -r requirements.txt
```

We also need to install a MILP solver. This project uses `cbc` solver which is an open-source mixed integer linear programming solver written in C++.

### Linux

- using apt package manager

```bash
apt install -y -q coinor-cbc
```

- using pacman package manager

```bash
sudo pacman -S  coin-or-cbc
```

### Windows

Download binary from github [release](https://github.com/coin-or/Cbc/releases/tag/releases%2F2.10.8) and install.

### MacOS

```bash
brew install coin-or-tools/coinor/cbc
```

## Documentation

- Input Parameters for a script can be set by using config file.
- A test config file is provided named `config.txt` it uses json formatting.

### Create Data Files

- Data file to run 1-PDTSP on cities can be provided or can be created using `get_cities_data.py`.
- A `.txt` file will be needed by script that contains name of the cities. A default `cities.txt` is provided.

Create data for cities

```bash
python get_cities_data.py --names=cities.txt --save_folder=/data/
```

**Arguments**

- `--name` or `-n`: provide path to name of cities `.txt` file. (required)
- `--save_folder` or `-s` provide path to folder where data will be saved in csv. It will save two files in that folder named `cities_data.csv` or `cities_distances.csv`. (not required)

### Run 1-PDTSP on cities

- 1-PDTSP can be run on files that we get from `get_cities_data.py` script or data in similar format generated by this script. Test data is provided inside `\data\` folder.
- A `config` file will be needed by script that contains settings related to run script. A test config file is provided as `config.txt`

Run 1-PDTSP on cities

```bash
python pdtsp_1.py --config=config.txt
```

**Arguments**

- `--config` or `-c`: provide path to config file. (required)

### Some Links

- **[Results on 34 cities of Maharastra Demand 1](https://tarun-bisht.github.io/IE716-Team-Dantzig/data/map.html)**
- **[Results on 34 cities of Maharastra Demand 2](https://tarun-bisht.github.io/IE716-Team-Dantzig/data/map1.html)**
- **[Results on 34 cities of Maharastra Demand 3](https://tarun-bisht.github.io/IE716-Team-Dantzig/data/map2.html)**
- **[Results on 34 cities of Maharastra Demand 4](https://tarun-bisht.github.io/IE716-Team-Dantzig/data/map3.html)**
